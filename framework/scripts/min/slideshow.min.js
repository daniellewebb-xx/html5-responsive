function $(t,e){return"string"==typeof t?(e||document).querySelector(t):t}function $$(t,e){return[].slice.call((e||document).querySelectorAll(t))}!function(t,e,s){if(!("classList"in e)){var i=$('script[src$="slideshow.js"]'),n=document.createElement("script");n.src=i.src.replace(/\bslideshow\.js/,"classList.js"),i.parentNode.insertBefore(n,i)}Array.prototype.stableSort=function(t){if(!t)return this.sort();var e=this.map(function(t,e){return{i:t,j:e}});return e.sort(function(e,s){return result=t(e.i,s.i),0===result?e.j-s.j:result}).map(function(t){return t.i})};var a=document.title+"",r=window.SlideShow=function(t){function s(t,e,s){var i=document.createElement("h1"),n=document.createElement("a");s=s||t.title||t.getAttribute("data-title")||e.replace(/\/#?$/,"").replace(/^\w+:\/\/(www\.)?/,""),n.href=e,n.target="_blank",n.textContent=s,i.appendChild(n),t.appendChild(i)}var i=this;if(window.slideshow||(window.slideshow=this),this.index=this.slide=t||0,this.item=0,this.duration=e.getAttribute("data-duration"),this.duration>0){var n=document.createElement("div");n.id="timer",n.setAttribute("style",PrefixFree.prefixCSS("transition-duration: "+60*this.duration+"s;")),e.appendChild(n),addEventListener("load",function(){n.className="end",setTimeout(function(){n.classList.add("overtime")},6e4*i.duration)})}this.indicator=document.createElement("div"),this.indicator.id="indicator",e.appendChild(this.indicator);var a=document.createElement("nav");a.id="onscreen-nav";var r=document.createElement("button");r.className="onscreen-nav prev",r.textContent="◀",r.type="button",r.onclick=function(){i.previous()};var o=document.createElement("button");o.className="onscreen-nav next",o.textContent="Next ▶",o.type="button",o.onclick=function(){i.next()},a.appendChild(r),a.appendChild(o),a.style.display="none",document.body.appendChild(a),$$('.slide[data-base][data-src*=" "]').forEach(function(t){t.getAttribute("data-src").split(/\s+/).forEach(function(e){var s=t.cloneNode(!0);s.setAttribute("data-src",e),t.parentNode.insertBefore(s,t)});t.parentNode.removeChild(t)}),this.slides=$$(".slide",e),this.overview=function(t){e.classList.contains("show-thumbnails")?(e.classList.remove("show-thumbnails"),e.classList.remove("headers-only")):(e.classList.add("show-thumbnails"),!t||t.shiftKey&&t.ctrlKey||e.classList.add("headers-only"),e.addEventListener("click",function(t){for(var s=t.target;s&&!s.classList.contains("slide");)s=s.parentNode;s&&(i.goto(s.id),setTimeout(function(){i.adjustFontSize()},1e3)),e.classList.remove("show-thumbnails"),e.classList.remove("headers-only"),e.removeEventListener("click",arguments.callee)},!1))},$$(".slide[data-src]:not([data-base]):empty").forEach(function(t){var e=document.createElement("iframe");e.setAttribute("data-src",t.getAttribute("data-src")),t.removeAttribute("data-src"),t.appendChild(e)}),$$(".slide > iframe:only-child").forEach(function(t){var e=t.parentNode,i=t.src||t.getAttribute("data-src");e.classList.add("iframe"),e.classList.contains("notitle")||s(e,i,t.title),e.classList.add("onscreen-nav")}),this.isIpad=navigator.userAgent.indexOf("iPad;")>-1,this.order=[];for(var d=0;d<this.slides.length;d++){var t=this.slides[d];if(t.id||(t.id="slide"+(d+1)),t.title)t.setAttribute("data-title",t.title),t.removeAttribute("title");else{var c=$("hgroup",t)||$("h1,h2,h3,h4,h5,h6",t);c&&c.textContent.trim()&&t.setAttribute("data-title",c.textContent)}t.setAttribute("data-index",d);var l=t.getAttribute("data-import"),h=l?this.getSlideById(l):null;this.order.push(h?+h.getAttribute("data-index"):d);var u=$$("[data-steps]",t);t.hasAttribute("data-steps")&&u.push(t),u.forEach(function(e){var s=+e.getAttribute("data-steps");e.removeAttribute("data-step");for(var i=0;s>i;i++){var n=document.createElement("span");n.style.display="none",n.className="delayed dummy",n.dummyFor=e,n.dummyIndex=i+1,e===t?t.appendChild(n):e.parentNode.insertBefore(n,e)}})}"projector"===window.name&&window.opener&&opener.slideshow&&(e.classList.add("projector"),this.presenter=opener.slideshow,this.presenter.projector=this),addEventListener("resize",this,!1),addEventListener("load",this,!1),addEventListener("hashchange",this,!1),this.handleEvent({type:"hashchange"}),document.addEventListener("keyup",this,!1),document.addEventListener("keydown",this,!1),$$('link[rel~="csss-import"]').forEach(function(t){{var e=t.href,s=t.id,i=$$('.slide[data-base="'+s+'"][data-src^="#"]');t.rel.indexOf("slides")>-1}if(i.length){var n=document.createElement("iframe"),r=i[0].getAttribute("data-src");n.className="csss-import",n.src=e+r,document.body.insertBefore(n,document.body.firstChild),i.forEach(function(t){var e=t.getAttribute("data-src");t.classList.add("dont-resize"),this.onSlide(t.id,function(){a.style.display="",n.src=n.src.replace(/#.+$/,e),n.className="csss-import show"})},this)}},this)};r.prototype={handleEvent:function(t){var s=this;if(t.metaKey&&t.keyCode)return!0;switch(t.type){case"keyup":if((t.ctrlKey||t.shiftKey)&&!t.altKey&&!/^(?:input|textarea)$/i.test(document.activeElement.nodeName))switch(t.keyCode){case 71:var i=prompt("Which slide?");s.goto(+i?i-1:i);break;case 72:s.overview(t);break;case 74:e.classList.contains("hide-elements")?e.classList.remove("hide-elements"):e.classList.add("hide-elements");break;case 80:this.projector=open(location,"projector"),window.focus(),e.classList.add("presenter")}break;case"keydown":if(t.target===e||t.target===e.parentNode||t.metaKey&&t.altKey)switch(t.keyCode>=32&&t.keyCode<=40&&t.preventDefault(),t.keyCode){case 33:this.previous();break;case 34:this.next();break;case 35:this.end();break;case 36:this.start();break;case 37:case 38:this.previous(t.ctrlKey||t.shiftKey);break;case 32:case 39:case 40:this.next(t.ctrlKey||t.shiftKey)}break;case"load":case"resize":this.adjustFontSize();break;case"hashchange":this.goto(location.hash.substr(1)||0)}},start:function(){this.goto(0)},end:function(){this.goto(this.slides.length-1)},next:function(t){if(!t&&this.items.length)this.nextItem();else if(this.goto(this.index+1),this.item=0,this.items.length)for(var e=0;e<this.items.length;e++){var s=this.items[e].classList;s&&(s.remove("displayed"),s.remove("current"))}},nextItem:function(){this.item<this.items.length?this.gotoItem(++this.item):(this.item=0,this.next(!0))},previous:function(t){if(!t&&this.item>0)this.previousItem();else if(this.goto(this.index-1),this.item=this.items.length,this.items.length){for(var e=0;e<this.items.length;e++)this.items[e].classList&&this.items[e].classList.add("displayed");var s=this.items[this.items.length-1];s.classList.remove("displayed"),s.classList.add("current")}},previousItem:function(){this.gotoItem(--this.item)},getSlideById:function(t){return $(".slide#"+t)},"goto":function(t){var e;window.removeEventListener("hashchange",this,!1);if(t+0===t&&t in this.slides?(this.index=t,this.slide=this.order[t],e=this.slides[this.slide],location.hash="#"+e.id):t+""===t&&(e=this.getSlideById(t),e&&(this.slide=this.index=+e.getAttribute("data-index"),location.hash="#"+t)),e){if(document.title=e.getAttribute("data-title")||a,e.classList.contains("iframe")){var s,i=$("iframe",e);i&&!i.hasAttribute("src")&&(s=i.getAttribute("data-src"))&&i.setAttribute("src",s)}else this.adjustFontSize();$("#onscreen-nav").style.display=this.isIpad||e.classList.contains("onscreen-nav")?"":"none",$$("iframe.csss-import").forEach(function(t){t.classList.remove("show")}),this.indicator.textContent=this.index+1,this.items=$$(".delayed, .delayed-children > *",this.slides[this.slide]),this.items.stableSort(function(t,e){return(t.getAttribute("data-index")||0)-(e.getAttribute("data-index")||0)}),this.item=0,this.projector&&this.projector.goto(t);var n=this.slides.previous,r=this.slides.next;this.slides.previous=this.slides[this.order[this.index-1]],this.slides.next=this.slides[this.order[this.index+1]],this.slides.previous&&this.slides.previous.classList.add("previous"),this.slides.next&&this.slides.next.classList.add("next"),n&&n!=this.slides.previous&&n.classList.remove("previous"),r&&r!=this.slides.next&&r.classList.remove("next")}var o=this;setTimeout(function(){addEventListener("hashchange",o,!1)},1e3)},gotoItem:function(t){this.item=t;for(var e,s=this.items,i=s.length;i-->0;)e=this.items[i].classList,e.remove("current"),e.remove("displayed"),e.contains("dummy")&&s[i].dummyFor&&s[i].dummyFor.removeAttribute("data-step");for(var i=this.item-1;i-->0;)s[i].classList.add("displayed");if(this.item>0){var n=s[this.item-1];n.classList.add("current");for(var a,i=this.item-1,r=s[i];i>0;i--)a=s[i-1],a.contains(r)&&(a.classList.remove("displayed"),a.classList.add("current"));n.classList.contains("dummy")&&n.dummyFor&&n.dummyFor.setAttribute("data-step",n.dummyIndex)}this.projector&&this.projector.gotoItem(t)},adjustFontSize:function(){var t=s.style,i=s.scrollHeight?s:e,n=window.innerHeight,a=window.innerWidth,r=this.slides[this.slide];if(t.fontSize="",!e.classList.contains("show-thumbnails")&&!r.classList.contains("dont-resize")){for(var o=100;(i.scrollHeight>n||i.scrollWidth>a)&&o>=35;o-=5)t.fontSize=o+"%";if(r.clientHeight&&r.clientWidth){var d=r.getAttribute("style");for(r.style.overflow="auto";(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)&&o>=35;o--)t.fontSize=o+"%";r.setAttribute("style",d)}35>=o&&(t.fontSize="")}},onCurrent:function(t){var e=r.getSlide(t);return e?"#"+e.id===location.hash:!1},onSlide:function(t,e,s){var i=this;t=(0!==t.indexOf("#")?"#":"")+t;var n=!1;t==location.hash&&(e.call(this.slides[this.slide]),n=!0),n&&s||addEventListener("hashchange",function(){t==location.hash&&(e.call(i.slides[i.slide]),n=!0,s&&removeEventListener("hashchange",arguments.callee))})}},r.getSlide=function(t){for(var e=t;e&&e.classList&&!e.classList.contains("slide");)e=e.parentNode;return e}}(document.head||document.getElementsByTagName("head")[0],document.body,document.documentElement),"scoped"in document.createElement("style")||addEventListener("load",function(){$$("style[scoped]").forEach(function(t){for(var e=t.sheet.cssRules,s=t.parentNode.id||SlideShow.getSlide(t).id||t.parentNode.parentNode.id,i=e.length;i--;){var n=e[i].selectorText.replace(/^|,/g,function(t){return"#"+s+" "+t}),a=e[i].cssText.replace(/^.+?{/,n+"{");t.sheet.deleteRule(i),t.sheet.insertRule(a,i)}t.removeAttribute("scoped"),t.setAttribute("data-scoped","")})});